<!-- signup.component.html -->
<div class="min-h-screen bg-[#0F172A] flex items-center justify-center p-4">
  <div hlmCard class="w-full max-w-md bg-white shadow-xl rounded-xl">
    <div hlmCardHeader class="text-center pb-2">
      <!-- Disney+ Logo -->
      <div>
        <img
          src="disney.png"
          alt="Disney+"
          class="h-36 mx-auto"
          loading="eager"
        />
      </div>
      <p hlmCardDescription class="text-gray-500 mt-2">
        Create your account to start streaming
      </p>
    </div>

    <div hlmCardContent>
      @if (isLoading) {
        <div class="flex justify-center py-12">
          <hlm-icon
            name="lucideLoader"
            class="h-8 w-8 animate-spin text-[#2563EB]"
          />
        </div>
      } @else {
        <form #signupForm="ngForm" (ngSubmit)="onSignup(signupForm)" class="space-y-6">
          <!-- Email -->
          <div class="space-y-1.5">
            <label hlmLabel class="text-gray-700 flex gap-2 items-center text-sm font-medium">
              <hlm-icon
                name="lucideMail"
                class="h-4 w-4 text-[#2563EB]"
              />
              Email
            </label>
            <div class="relative">
              <input
                hlmInput
                type="email"
                name="email"
                ngModel
                required
                email
                #emailInput="ngModel"
                class="w-full h-11 bg-white border-gray-200 rounded-lg
                       placeholder:text-gray-400 focus:border-[#2563EB] focus:ring-[#2563EB]"
                placeholder="name@example.com"
                [class.border-red-500]="emailInput.invalid && emailInput.touched"
              />
            </div>
            @if (emailInput.invalid && emailInput.touched) {
              <div class="text-red-500 text-sm px-1">
                @if (emailInput.errors?.['required']) {
                  <p>Email is required</p>
                }
                @if (emailInput.errors?.['email']) {
                  <p>Please enter a valid email</p>
                }
              </div>
            }
          </div>

          <!-- Password -->
          <div class="space-y-1.5">
            <label hlmLabel class="text-gray-700 flex gap-2 items-center text-sm font-medium">
              <hlm-icon
                name="lucideLock"
                class="h-4 w-4 text-[#2563EB]"
              />
              Password
            </label>
            <div class="relative">
              <input
                hlmInput
                [type]="showPassword ? 'text' : 'password'"
                name="password"
                ngModel
                required
                minlength="6"
                #passwordInput="ngModel"
                class="w-full h-11 bg-white border-gray-200 rounded-lg
                       placeholder:text-gray-400 focus:border-[#2563EB] focus:ring-[#2563EB]"
                placeholder="Create a password"
                [class.border-red-500]="passwordInput.invalid && passwordInput.touched"
              />
              <button
                type="button"
                (click)="togglePasswordVisibility()"
                class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400
                       hover:text-[#2563EB] transition-colors duration-200"
              >
                <hlm-icon
                  [name]="showPassword ? 'lucideEyeOff' : 'lucideEye'"
                  class="h-5 w-5"
                />
              </button>
            </div>
            @if (passwordInput.invalid && passwordInput.touched) {
              <div class="text-red-500 text-sm px-1">
                @if (passwordInput.errors?.['required']) {
                  <p>Password is required</p>
                }
                @if (passwordInput.errors?.['minlength']) {
                  <p>Password must be at least 6 characters</p>
                }
              </div>
            }
          </div>

          <!-- Terms -->
          <div class="space-y-2">
            <label class="flex items-start gap-3 cursor-pointer group">
              <input
                type="checkbox"
                name="terms"
                [(ngModel)]="agreeToTerms"
                required
                #termsInput="ngModel"
                class="w-4 h-4 rounded border-gray-300 text-[#2563EB]
                       focus:ring-[#2563EB] mt-1"
              />
              <span class="text-sm text-gray-600 group-hover:text-gray-900 transition-colors">
                I agree to Disney+'s Terms of Use and acknowledge Disney+'s
                Privacy Policy applies to my personal information.
              </span>
            </label>
            @if (termsInput.invalid && termsInput.touched) {
              <div class="text-red-500 text-sm px-1">
                You must agree to the terms to continue
              </div>
            }
          </div>

          <!-- Submit Button -->
          <button
            hlmBtn
            type="submit"
            [disabled]="signupForm.invalid || isLoading"
            class="w-full h-11 mt-6 bg-[#2563EB] hover:bg-[#1E40AF] text-white
                   font-semibold rounded-lg transition-all duration-200
                   disabled:opacity-50 disabled:cursor-not-allowed"
          >
            @if (isLoading) {
              <hlm-icon
                name="lucideLoader"
                class="mr-2 h-5 w-5 animate-spin"
              />
              Creating your account...
            } @else {
              Create Account
            }
          </button>

          <!-- Login link -->
          <div class="text-center mt-6">
            <span class="text-gray-600">
              Already have an account?
              <a href="/login"
                 class="text-[#2563EB] hover:text-[#1E40AF]
                        transition-colors ml-1 font-medium">
                Log in
              </a>
            </span>
          </div>
        </form>
      }
    </div>
  </div>
</div>
